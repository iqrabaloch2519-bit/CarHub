{% extends "base.html" %}
{% load static %}

{% block title %}Fake News Detection - CarHub{% endblock %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/predict.css' %}">
{% endblock %}

{% block content %}

<!-- Hero Section -->
<section class="hero-section text-white py-5" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 300px;">
    <div class="container py-5">
        <div class="row align-items-center">
            <div class="col-lg-12 text-center">
                <h1 class="display-4 fw-bold mb-3"> Fake News Detection</h1>
                <p class="lead mb-4">AI-powered tool to verify news authenticity</p>
            </div>
        </div>
    </div>
</section>

<!-- Main Content Section -->
 <link rel="stylesheet" href="{% static 'css/style.css' %}">
<section class="py-5 bg-light">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                
                <!-- Detection Form Card -->
                <div class="card shadow-lg border-0 mb-4">
                    <div class="card-body p-5">
                        <h3 class="text-center mb-4 fw-bold">
                            <i class="bi bi-newspaper me-2"></i>
                            Analyze News Content
                        </h3>
                        
                        <form id="newsForm">
                            {% csrf_token %}
                            <div class="mb-4">
                                <label for="newsText" class="form-label fw-semibold">
                                    Enter News Text:
                                </label>
                                <textarea 
                                    id="newsText" 
                                    name="news_text" 
                                    class="form-control form-control-lg" 
                                    rows="8" 
                                    placeholder="Paste or type news article text here to check if it's real or fake..." 
                                    required
                                    style="resize: vertical; min-height: 200px;"
                                ></textarea>
                                <div class="form-text">
                                    <i class="bi bi-info-circle me-1"></i>
                                    Minimum 50 characters required for accurate analysis
                                </div>
                            </div>
                            
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="bi bi-search me-2"></i>Analyze News
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Loading Indicator -->
                <div id="loading" class="text-center my-4" style="display: none;">
                    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-3 fw-semibold"> Analyzing... Please wait...</p>
                </div>

                <!-- Error Message -->
                <div id="error" class="alert alert-danger alert-dismissible fade show" role="alert" style="display: none;">
                    <i class="bi bi-exclamation-triangle me-2"></i>
                    <span id="errorMessage"></span>
                    <button type="button" class="btn-close" onclick="document.getElementById('error').style.display='none'"></button>
                </div>

                <!-- Result Card -->
                <div id="result" class="card shadow-lg border-0" style="display: none;">
                    <div class="card-body p-5">
                        <div class="text-center mb-4">
                            <h2 id="predictionLabel" class="display-6 fw-bold mb-3"></h2>
                            <div class="badge bg-primary fs-5 px-4 py-2">
                                <strong>Confidence:</strong> <span id="confidence"></span>%
                            </div>
                        </div>
                        
                        <hr class="my-4">
                        
                        <div class="row text-center">
                            <div class="col-md-6 mb-3 mb-md-0">
                                <div class="card bg-danger bg-opacity-10 border-danger">
                                    <div class="card-body">
                                        <i class="bi bi-x-circle text-danger display-4"></i>
                                        <h5 class="mt-2">Fake Probability</h5>
                                        <h3 class="text-danger fw-bold"><span id="fakeProb"></span>%</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card bg-success bg-opacity-10 border-success">
                                    <div class="card-body">
                                        <i class="bi bi-check-circle text-success display-4"></i>
                                        <h5 class="mt-2">Real Probability</h5>
                                        <h3 class="text-success fw-bold"><span id="realProb"></span>%</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-center mt-4">
                            <button class="btn btn-outline-primary" onclick="location.reload()">
                                <i class="bi bi-arrow-clockwise me-2"></i>Analyze Another
                            </button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

<!-- Info Section -->
<section class="py-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card border-0 h-100 text-center p-4 shadow-sm">
                    <div class="card-body">
                        <div class="mb-3">
                            <i class="bi bi-cpu display-3 text-primary"></i>
                        </div>
                        <h4 class="fw-bold">AI-Powered</h4>
                        <p class="text-muted">Advanced machine learning algorithms for accurate detection</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card border-0 h-100 text-center p-4 shadow-sm">
                    <div class="card-body">
                        <div class="mb-3">
                            <i class="bi bi-lightning display-3 text-success"></i>
                        </div>
                        <h4 class="fw-bold">Fast Results</h4>
                        <p class="text-muted">Get instant analysis in seconds</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card border-0 h-100 text-center p-4 shadow-sm">
                    <div class="card-body">
                        <div class="mb-3">
                            <i class="bi bi-shield-check display-3 text-info"></i>
                        </div>
                        <h4 class="fw-bold">Reliable</h4>
                        <p class="text-muted">High accuracy in detecting misinformation</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
    {{ block.super }}
    <script src="{% static 'js/predict.js' %}"></script>
{% endblock %}